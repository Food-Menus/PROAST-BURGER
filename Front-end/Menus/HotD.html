<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="./../../Static/style.css">
  <link href="https://fonts.googleapis.com/css2?family=Open+Sans:ital,wght@0,300..800;1,300..800&display=swap" rel="stylesheet">
  <link rel="icon" href="./../../Static/images/ุงุณุงุณูุงุช/logoooo.png" type="image/x-icon">
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@7.12.15/dist/sweetalert2.all.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@7.12.15/dist/sweetalert2.all.min.js"></script>
  <title>Broast & burger</title> 
  <style>
    .footer__bar {
        text-align: center;
        width: 100%;
        background-color: var(--greyColor);
        position: fixed; /* ูุฌุนู ุงูููุชุฑ ุซุงุจุชูุง ูู ุฃุณูู ุงูุดุงุดุฉ */
        bottom: 0; /* ูุถุน ุงูููุชุฑ ูู ุฃุณูู ุงูุดุงุดุฉ */
        width: 100%; /* ูุฌุนู ุงูููุชุฑ ููุชุฏ ุนูู ูุงูู ุนุฑุถ ุงูุดุงุดุฉ */
    }
    </style>
</head>

<body>
<!--*************************************************************************************************-->
<!--*************************************************************************************************-->
<!--sidebar-->
<div id="sidebar" about="./Front-end/Pages/about.html" feedback="./Front-end/Pages/feedback.html" Profile="./Front-end/Pages/Profile.html"></div>
<!--*************************************************************************************************-->
<!--*************************************************************************************************-->
<!--loading-->
<div class="loading-overlay" id="loadingScreen">
<img src="./../../Static/images/ุงุณุงุณูุงุช/logoooo.png" class="loader-img" alt="Loading..."></div>
<!--*************************************************************************************************-->
<!--*************************************************************************************************-->
<!--main--><div class="main">
<!--*************************************************************************************************-->
<!--*************************************************************************************************-->
<!--navbar-->
<div id="navbar" data-Location="./../../index.html" data-imgN="../../Static/images/ุงุณุงุณูุงุช/logoooo.png" ></div>
<!--*************************************************************************************************-->
<!--*************************************************************************************************-->
<!--Codes-->


  <Code>
    <section class="section__container order__container" id="menu">
      <h2 class="section__header" style="text-align: center; padding-bottom:15px ; background-color: rgba(0, 0, 0, 0.716); border-radius: 15px; color: white; padding-top: 15px;  "> ุงููุดุฑูุจุงุช ุงูุณุงุฎูู </h2><br>
      <p class="section__description" style="text-align: center; background-color: rgba(0, 0, 0, 0.716); border-radius: 15px; color: white; padding: 15px;  padding-bottom:15px;">  ุฃุฎุชูุงุฑ ุงูููู ุชูุญุจูู ๐ </p>      
      <div id="drinks-list" class="destination__grid"></div>
    </section> 
  </Code>


</div>
<a href="./../Pages/order.html"><div class="counter"><span id="item-count">ุนุฏุฏ ุงูุนูุงุตุฑ ุงููุญุฏุฏุฉ: 0</span><ion-icon name="cart-outline" class="icon-1"></ion-icon></div></a>
<!--*************************************************************************************************-->
<!--*************************************************************************************************-->
<!--footer--> 
<div id="footer"></div> 
<!--*************************************************************************************************-->
<!--*************************************************************************************************-->
<!--scripts--> 
<script>
  //**********************************************************************************************//
  //**********************************************************************************************//
  //**  git data & add cart  **//
  
    const sheetID = '1pj1MNrB2LsHFG5GjiOlzK8u-yA3PdKC2YUGBxmE6qJY'; // ูุนุฑู ุฌุฏูู ุฌูุฌู
    const base = `https://docs.google.com/spreadsheets/d/${sheetID}/gviz/tq?tqx=out:json`;

    async function fetchDrinks() {
      const response = await fetch(base);
      const data = await response.text();
      const json = JSON.parse(data.substring(47).slice(0, -2));
      const drinksList = document.getElementById('drinks-list');
      drinksList.innerHTML = '';

      json.table.rows.forEach(row => {
        const drinkType = row.c[0] ? row.c[0].v : 'ุบูุฑ ูุชููุฑ'; // ููุน ุงููุดุฑูุจ
        const drinkPrice = row.c[1] ? row.c[1].v : 'ุบูุฑ ูุชููุฑ'; // ุณุนุฑ ุงููุดุฑูุจ
        const drinkImage = row.c[2] ? row.c[2].v : ''; // ุฑุงุจุท ุงูุตูุฑุฉ

        drinksList.innerHTML += `
          <div class="destination__card" onclick="addToCart('${drinkType}', '${drinkPrice}')">
            <img src="${drinkImage}" alt="${drinkType}" />
            <div class="destination__details">
              <div class="menu-item">
                <h4>${drinkType}</h4>
                <p>${drinkPrice}</p>
              </div>
            </div>
          </div>
        `;
      });
    }

    function addToCart(drinkType, drinkPrice) {
      // ุงูุญุตูู ุนูู ุงูุนูุงุตุฑ ุงูููุฌูุฏุฉ ูู ุงููุงุฑุช
      let cartItems = JSON.parse(localStorage.getItem('cartItems')) || [];
      
      // ุฅุถุงูุฉ ุงููุดุฑูุจ ุฅูู ุงููุงุฑุช
      cartItems.push({ type: drinkType, price: drinkPrice });
      
      // ุชุฎุฒูู ุงููุงุฑุช ูู localStorage
      localStorage.setItem('cartItems', JSON.stringify(cartItems));
      
      // ุชุญุฏูุซ ุนุฏุฏ ุงูุนูุงุตุฑ ูู ุงููุงุฑุช
      document.getElementById('item-count').innerText = `ุนุฏุฏ ุงูุนูุงุตุฑ ุงููุญุฏุฏุฉ: ${cartItems.length}`;
    }

    fetchDrinks(); // ุงุณุชุฏุนุงุก ุงูุฏุงูุฉ ูุชุญููู ุงูุจูุงูุงุช

    const menuItems = document.querySelectorAll(".menu-item");
    const cartItems = JSON.parse(localStorage.getItem("cartItems")) || [];
    const counter = document.querySelector(".counter span");
    const counterElement = document.querySelector(".counter");
    const clearCartButton = document.getElementById("clearCart");

    function updateCounter() {
      counter.textContent = `ุนุฏุฏ ุงูุนูุงุตุฑ ุงููุญุฏุฏุฉ : ${cartItems.length}`;
      counterElement.style.display = cartItems.length > 0 ? "block" : "none";
    }

    function addToCart(itemName, itemprice) {
      cartItems.push({ name: itemName, price: itemprice });
      localStorage.setItem("cartItems", JSON.stringify(cartItems));
      updateCounter();
      swal(`${itemName} ุชูุช ุฅุถุงูุชู ุฅูู ุงูุณูุฉ`);
    }

    menuItems.forEach((item) => {
      item.addEventListener("click", () => {
        const itemName = item.querySelector("h4").textContent;
        const itemprice = item.querySelector("p").textContent;
        addToCart(itemName, itemprice);
      });
    });
    
    updateCounter();

    function updateDataAttributes() {
      menuItems.forEach((item) => {
        const h4Elements = item.querySelectorAll("h4");
        item.dataset.name = h4Elements[0].textContent;
        item.dataset.price = h4Elements[1].textContent;
      });
    }

    updateDataAttributes();

  //**********************************************************************************************//
  //**********************************************************************************************//
  //**  loadingScreen  **//

    // ุฅุฎูุงุก ุดุงุดุฉ ุงูุชุญููู ุจุนุฏ ุชุญููู ุงูุตูุญุฉ
    window.addEventListener('load', function() {
        document.getElementById('loadingScreen').style.display = 'none';
    });

    // (ุฅุฎุชูุงุฑู) ุฅุฎูุงุก ุงูุดุงุดุฉ ุจุนุฏ ููุช ูุนูู ูุฅุญุชูุงุท
    setTimeout(function() {
        document.getElementById('loadingScreen').style.display = 'none';
    }, 5000); // 5 ุซูุงูู ูุญุฏ ุฃูุตู

</script>
<!--*************************************************************************************************-->
<!--*************************************************************************************************-->
<!--liberary-->
<script src="./../Components.js" defer></script>
<script type="module" src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.esm.js"></script>
<script nomodule src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.js"></script>
<script src="https://code.jquery.com/jquery-2.2.4.min.js"></script>
<script src="./../../Back-end/JavaScript.js"></script>
<script src="./../../Back-end/script.js"></script> 
<script src="./../../Back-end/app.js"></script>

</body>

</html>